<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
        Crafting Calculator
    </title>
    <meta content="Crafting Calculator" property="og:title" />
    <meta content="Crafting calculator for Genshin Impact" property="og:description" />
    <meta content="website" property="og:type" />
    <meta content="https://static.wikia.nocookie.net/gensin-impact/images/6/69/Splashscreen_Windblume%27s_Breath.png"
        property="og:image" />
    <meta content="https://remls.github.io/CraftingCalculator" property="og:url" />
    <meta content="https://static.wikia.nocookie.net/gensin-impact/images/6/69/Splashscreen_Windblume%27s_Breath.png"
        name="twitter:card" />
    <link href="assets/styles.css" rel="stylesheet" />
    <script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/persist@3.10.5/dist/cdn.min.js"></script>
    <script defer src="https://unpkg.com/alpinejs@3.10.5/dist/cdn.min.js"></script>
    <script src="assets/presets.js"></script>
    <script src="assets/scripts.js"></script>
    </meta>
</head>

<body x-data="craftData">
    <table>
        <tr>
            <th></th>
            <th>Have</th>
            <th>Need</th>
        </tr>
        <tr>
            <th>★★★★★</th>
            <td>
                <input tabindex="1" type="number" value="0" @focus="clearValueIfZero" @change="updateCalculations"
                    :disabled="isDisabled.five" x-model="have.five" :class="{ 'zero': !have.five }" />
            </td>
            <td>
                <input tabindex="11" type="number" value="0" @focus="clearValueIfZero" @change="updateCalculations"
                    :disabled="isDisabled.five" x-model="need.five" :class="{ 'zero': !need.five }" />
            </td>
        </tr>
        <tr>
            <th>★★★★</th>
            <td>
                <input tabindex="2" type="number" value="0" @focus="clearValueIfZero" @change="updateCalculations"
                    :disabled="isDisabled.four" x-model="have.four" :class="{ 'zero': !have.four }" />
            </td>
            <td>
                <input tabindex="12" type="number" value="0" @focus="clearValueIfZero" @change="updateCalculations"
                    :disabled="isDisabled.four" x-model="need.four" :class="{ 'zero': !need.four }" />
            </td>
        </tr>
        <tr>
            <th>★★★</th>
            <td>
                <input tabindex="3" type="number" value="0" @focus="clearValueIfZero" @change="updateCalculations"
                    :disabled="isDisabled.three" x-model="have.three" :class="{ 'zero': !have.three }" />
            </td>
            <td>
                <input tabindex="13" type="number" value="0" @focus="clearValueIfZero" @change="updateCalculations"
                    :disabled="isDisabled.three" x-model="need.three" :class="{ 'zero': !need.three }" />
            </td>
        </tr>
        <tr>
            <th>★★</th>
            <td>
                <input tabindex="4" type="number" value="0" @focus="clearValueIfZero" @change="updateCalculations"
                    :disabled="isDisabled.two" x-model="have.two" :class="{ 'zero': !have.two }" />
            </td>
            <td>
                <input tabindex="14" type="number" value="0" @focus="clearValueIfZero" @change="updateCalculations"
                    :disabled="isDisabled.two" x-model="need.two" :class="{ 'zero': !need.two }" />
            </td>
        </tr>
        <tr>
            <th>★</th>
            <td>
                <input tabindex="5" type="number" value="0" @focus="clearValueIfZero" @change="updateCalculations"
                    :disabled="isDisabled.one" x-model="have.one" :class="{ 'zero': !have.one }" />
            </td>
            <td>
                <input tabindex="15" type="number" value="0" @focus="clearValueIfZero" @change="updateCalculations"
                    :disabled="isDisabled.one" x-model="need.one" :class="{ 'zero': !need.one }" />
            </td>
        </tr>
        <tr>
            <td>
                <div class="reset-button-container">
                    <button class="reset-button" @click="fullReset">Full Reset</button>
                </div>
            </td>
            <td>
                <div class="reset-button-container">
                    <button tabindex="6" class="reset-button" @click="reset('have')">Reset</button>
                </div>
            </td>
            <td>
                <div class="reset-button-container">
                    <button tabindex="16" class="reset-button" @click="reset('need')">Reset</button>
                </div>
            </td>
        </tr>

        <tr>
            <th>Progress</th>
            <td colspan="2">
                <progress value="0" max="100" x-model="percent" :class="{ 'full': percent >= 100 }"></progress>
                <br />
                <span x-text="haveSimplified"></span> / <span x-text="needSimplified"></span>
                <template x-if="diffSimplified > 0">
                    <span>
                        (<span x-text="diffSimplified"></span> remaining)
                    </span>
                </template>
                <br />
                <span x-text="percentText"></span>
            </td>
        </tr>
    </table>

    <section class="presets-section">
        <h2>Presets</h2>

        <div class="explanation">
            <p>
                Use the sliders to select From and To, then click one of the buttons to apply the preset. Applying a
                preset will overwrite any existing value in the Need column.
            </p>
            <p>
                If a preset is selected, the simplified value (under the progress bar) will be calculated based
                only on the available rarities of your selected preset (with the lowest rarity taking a value of 1,
                then 3, then 9, etc.). Also, input boxes for rarities that are impossible to obtain for the selected
                preset will be disabled.
            </p>
            <p>
                To clear the preset and re-enable all inputs, click the "Full Reset" button.
            </p>
        </div>

        <h4>Character ascension</h4>

        <div class="range-group" :class="{ 'error': presetOptions.characterAscension.sliderGroups[0].error }">
            <input type="range" :min="presets.characterAscension.min" :max="presets.characterAscension.max"
                @change="updatePreset('characterAscension')" x-model="presetOptions.characterAscension.sliderGroups[0].from">
            <div>
                <span x-text="presetOptions.characterAscension.sliderGroups[0].from"></span> ✦
                to
                <span x-text="presetOptions.characterAscension.sliderGroups[0].to"></span> ✦
                <template x-if="presetOptions.characterAscension.sliderGroups[0].error">
                    <span style="color: red;">
                        <br />
                        Invalid selection
                    </span>
                </template>
            </div>
            <input type="range" :min="presets.characterAscension.min" :max="presets.characterAscension.max"
                @change="updatePreset('characterAscension')" x-model="presetOptions.characterAscension.sliderGroups[0].to">
        </div>

        <div class="button-group">
            <button class="preset-button" @click="loadPresetFromSelection('characterAscension', 'gemstones')">
                <div class="images">
                    <img src="assets/images/gemstone-5.png">
                    <img src="assets/images/gemstone-4.png">
                    <img src="assets/images/gemstone-3.png">
                    <img src="assets/images/gemstone-2.png">
                    <img src="assets/images/none.png">
                </div>
                Gemstones
                <div class="preview" x-text="craftableToStr(presetOptions.characterAscension.drops.gemstones)"></div>
            </button>
            <button class="preset-button" @click="loadPresetFromSelection('characterAscension', 'mobDrops')">
                <div class="images">
                    <img src="assets/images/none.png">
                    <img src="assets/images/none.png">
                    <img src="assets/images/mob-drop-3.png">
                    <img src="assets/images/mob-drop-2.png">
                    <img src="assets/images/mob-drop-1.png">
                </div>
                Mob drops
                <div class="preview" x-text="craftableToStr(presetOptions.characterAscension.drops.mobDrops)"></div>
            </button>
        </div>

        <h4>Talents</h4>

        <div class="range-group" :class="{ 'error': presetOptions.talents.sliderGroups[0].error }">
            <input type="range" :min="presets.talents.min" :max="presets.talents.max" @change="updatePreset('talents')"
                x-model="presetOptions.talents.sliderGroups[0].from">
            <div>
                Lv. <span x-text="presetOptions.talents.sliderGroups[0].from"></span>
                to
                Lv. <span x-text="presetOptions.talents.sliderGroups[0].to"></span>
                <template x-if="presetOptions.talents.sliderGroups[0].error">
                    <span style="color: red;">
                        <br />
                        Invalid selection
                    </span>
                </template>
            </div>
            <input type="range" :min="presets.talents.min" :max="presets.talents.max" @change="updatePreset('talents')"
                x-model="presetOptions.talents.sliderGroups[0].to">
        </div>

        <div class="button-group">
            <button class="preset-button" @click="loadPresetFromSelection('talents', 'talentBooks')">
                <div class="images">
                    <img src="assets/images/none.png">
                    <img src="assets/images/talent-book-4.png">
                    <img src="assets/images/talent-book-3.png">
                    <img src="assets/images/talent-book-2.png">
                    <img src="assets/images/none.png">
                </div>
                Talent books (1 talent)
                <div class="preview" x-text="craftableToStr(presetOptions.talents.drops.talentBooks)"></div>
            </button>
            <button class="preset-button" @click="loadPresetFromSelection('talents', 'mobDrops')">
                <div class="images">
                    <img src="assets/images/none.png">
                    <img src="assets/images/none.png">
                    <img src="assets/images/mob-drop-3.png">
                    <img src="assets/images/mob-drop-2.png">
                    <img src="assets/images/mob-drop-1.png">
                </div>
                Mob drops (1 talent)
                <div class="preview" x-text="craftableToStr(presetOptions.talents.drops.mobDrops)"></div>
            </button>
            <button class="preset-button" @click="loadPresetFromSelection('talents', 'talentBooksX2')">
                <div class="images">
                    <img src="assets/images/none.png">
                    <img src="assets/images/talent-book-4.png">
                    <img src="assets/images/talent-book-3.png">
                    <img src="assets/images/talent-book-2.png">
                    <img src="assets/images/none.png">
                </div>
                Talent books (2 talents)
                <div class="preview" x-text="craftableToStr(presetOptions.talents.drops.talentBooksX2)"></div>
            </button>
            <button class="preset-button" @click="loadPresetFromSelection('talents', 'mobDropsX2')">
                <div class="images">
                    <img src="assets/images/none.png">
                    <img src="assets/images/none.png">
                    <img src="assets/images/mob-drop-3.png">
                    <img src="assets/images/mob-drop-2.png">
                    <img src="assets/images/mob-drop-1.png">
                </div>
                Mob drops (2 talents)
                <div class="preview" x-text="craftableToStr(presetOptions.talents.drops.mobDropsX2)"></div>
            </button>
            <button class="preset-button" @click="loadPresetFromSelection('talents', 'talentBooksX3')">
                <div class="images">
                    <img src="assets/images/none.png">
                    <img src="assets/images/talent-book-4.png">
                    <img src="assets/images/talent-book-3.png">
                    <img src="assets/images/talent-book-2.png">
                    <img src="assets/images/none.png">
                </div>
                Talent books (3 talents)
                <div class="preview" x-text="craftableToStr(presetOptions.talents.drops.talentBooksX3)"></div>
            </button>
            <button class="preset-button" @click="loadPresetFromSelection('talents', 'mobDropsX3')">
                <div class="images">
                    <img src="assets/images/none.png">
                    <img src="assets/images/none.png">
                    <img src="assets/images/mob-drop-3.png">
                    <img src="assets/images/mob-drop-2.png">
                    <img src="assets/images/mob-drop-1.png">
                </div>
                Mob drops (3 talents)
                <div class="preview" x-text="craftableToStr(presetOptions.talents.drops.mobDropsX3)"></div>
            </button>
        </div>

        <h4>5★ weapon ascension</h4>

        <div class="range-group" :class="{ 'error': presetOptions.weaponAscension5.sliderGroups[0].error }">
            <input type="range" :min="presets.weaponAscension5.min" :max="presets.weaponAscension5.max"
                @change="updatePreset('weaponAscension5')" x-model="presetOptions.weaponAscension5.sliderGroups[0].from">
            <div>
                <span x-text="presetOptions.weaponAscension5.sliderGroups[0].from"></span> ✦
                to
                <span x-text="presetOptions.weaponAscension5.sliderGroups[0].to"></span> ✦
                <template x-if="presetOptions.weaponAscension5.sliderGroups[0].error">
                    <span style="color: red;">
                        <br />
                        Invalid selection
                    </span>
                </template>
            </div>
            <input type="range" :min="presets.weaponAscension5.min" :max="presets.weaponAscension5.max"
                @change="updatePreset('weaponAscension5')" x-model="presetOptions.weaponAscension5.sliderGroups[0].to">
        </div>

        <div class="button-group">
            <button class="preset-button" @click="loadPresetFromSelection('weaponAscension5', 'weaponDomainDrops')">
                <div class="images">
                    <img src="assets/images/weapon-domain-drop-5.png">
                    <img src="assets/images/weapon-domain-drop-4.png">
                    <img src="assets/images/weapon-domain-drop-3.png">
                    <img src="assets/images/weapon-domain-drop-2.png">
                    <img src="assets/images/none.png">
                </div>
                Weapon domain drops
                <div class="preview" x-text="craftableToStr(presetOptions.weaponAscension5.drops.weaponDomainDrops)">
                </div>
            </button>
            <button class="preset-button" @click="loadPresetFromSelection('weaponAscension5', 'eliteMobDrops')">
                <div class="images">
                    <img src="assets/images/none.png">
                    <img src="assets/images/elite-mob-drop-4.png">
                    <img src="assets/images/elite-mob-drop-3.png">
                    <img src="assets/images/elite-mob-drop-2.png">
                    <img src="assets/images/none.png">
                </div>
                Elite mob drops
                <div class="preview" x-text="craftableToStr(presetOptions.weaponAscension5.drops.eliteMobDrops)"></div>
            </button>
            <button class="preset-button" @click="loadPresetFromSelection('weaponAscension5', 'mobDrops')">
                <div class="images">
                    <img src="assets/images/none.png">
                    <img src="assets/images/none.png">
                    <img src="assets/images/mob-drop-3.png">
                    <img src="assets/images/mob-drop-2.png">
                    <img src="assets/images/mob-drop-1.png">
                </div>
                Mob drops
                <div class="preview" x-text="craftableToStr(presetOptions.weaponAscension5.drops.mobDrops)"></div>
            </button>
        </div>

        <h4>4★ weapon ascension</h4>

        <div class="range-group" :class="{ 'error': presetOptions.weaponAscension4.sliderGroups[0].error }">
            <input type="range" :min="presets.weaponAscension4.min" :max="presets.weaponAscension4.max"
                @change="updatePreset('weaponAscension4')" x-model="presetOptions.weaponAscension4.sliderGroups[0].from">
            <div>
                <span x-text="presetOptions.weaponAscension4.sliderGroups[0].from"></span> ✦
                to
                <span x-text="presetOptions.weaponAscension4.sliderGroups[0].to"></span> ✦
                <template x-if="presetOptions.weaponAscension4.sliderGroups[0].error">
                    <span style="color: red;">
                        <br />
                        Invalid selection
                    </span>
                </template>
            </div>
            <input type="range" :min="presets.weaponAscension4.min" :max="presets.weaponAscension4.max"
                @change="updatePreset('weaponAscension4')" x-model="presetOptions.weaponAscension4.sliderGroups[0].to">
        </div>

        <div class="button-group">
            <button class="preset-button" @click="loadPresetFromSelection('weaponAscension4', 'weaponDomainDrops')">
                <div class="images">
                    <img src="assets/images/weapon-domain-drop-5.png">
                    <img src="assets/images/weapon-domain-drop-4.png">
                    <img src="assets/images/weapon-domain-drop-3.png">
                    <img src="assets/images/weapon-domain-drop-2.png">
                    <img src="assets/images/none.png">
                </div>
                Weapon domain drops
                <div class="preview" x-text="craftableToStr(presetOptions.weaponAscension4.drops.weaponDomainDrops)">
                </div>
            </button>
            <button class="preset-button" @click="loadPresetFromSelection('weaponAscension4', 'eliteMobDrops')">
                <div class="images">
                    <img src="assets/images/none.png">
                    <img src="assets/images/elite-mob-drop-4.png">
                    <img src="assets/images/elite-mob-drop-3.png">
                    <img src="assets/images/elite-mob-drop-2.png">
                    <img src="assets/images/none.png">
                </div>
                Elite mob drops
                <div class="preview" x-text="craftableToStr(presetOptions.weaponAscension4.drops.eliteMobDrops)"></div>
            </button>
            <button class="preset-button" @click="loadPresetFromSelection('weaponAscension4', 'mobDrops')">
                <div class="images">
                    <img src="assets/images/none.png">
                    <img src="assets/images/none.png">
                    <img src="assets/images/mob-drop-3.png">
                    <img src="assets/images/mob-drop-2.png">
                    <img src="assets/images/mob-drop-1.png">
                </div>
                Mob drops
                <div class="preview" x-text="craftableToStr(presetOptions.weaponAscension4.drops.mobDrops)"></div>
            </button>
        </div>
    </section>

    <section>
        <h2>Other calculators</h2>

        <div class="button-group row">
            <button class="link-button"
                @click="window.location.href='https://act.hoyolab.com/ys/event/calculator-sea/index.html'">
                <div class="images">
                    <img src="assets/images/hoyolab.png">
                </div>
                Hoyolab
            </button>
            <button class="link-button" @click="window.location.href='https://paimon.moe/calculator'">
                <div class="images">
                    <img src="assets/images/paimon.png">
                </div>
                Paimon.moe
            </button>
        </div>
    </section>
</body>

<footer>
    <div>
        Bear in mind that these calculations cannot take crafting bonuses into account.
    </div>
    <div class="icons">
        <a href="https://t.me/Remls">
            <svg fill="none" height="25" stroke="#0d1117" stroke-linecap="round" stroke-linejoin="round"
                stroke-width="1.5" viewbox="0 0 24 24" width="25">
                <path d="M0 0h24v24H0z" fill="none" stroke="none">
                </path>
                <path d="M15 10l-4 4l6 6l4 -16l-18 7l4 2l2 6l3 -4">
                </path>
            </svg>
        </a>
        <a href="https://github.com/Remls/CraftingCalculator">
            <svg fill="none" height="25" stroke="#0d1117" stroke-linecap="round" stroke-linejoin="round"
                stroke-width="1.5" viewbox="0 0 24 24" width="25">
                <path d="M0 0h24v24H0z" fill="none" stroke="none">
                </path>
                <path
                    d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5">
                </path>
            </svg>
        </a>
    </div>
</footer>

</html>