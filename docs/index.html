<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
        Crafting Calculator
    </title>
    <meta content="Crafting Calculator" property="og:title" />
    <meta content="Crafting calculator for Genshin Impact" property="og:description" />
    <meta content="website" property="og:type" />
    <meta content="https://static.wikia.nocookie.net/gensin-impact/images/6/69/Splashscreen_Windblume%27s_Breath.png"
        property="og:image" />
    <meta content="https://remls.github.io/CraftingCalculator" property="og:url" />
    <meta content="https://static.wikia.nocookie.net/gensin-impact/images/6/69/Splashscreen_Windblume%27s_Breath.png"
        name="twitter:card" />
    <link href="assets/styles.css" rel="stylesheet" />
    <script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/persist@3.10.5/dist/cdn.min.js"></script>
    <script defer src="https://unpkg.com/alpinejs@3.10.5/dist/cdn.min.js"></script>
    <script src="assets/presets.js"></script>
    <script src="assets/scripts.js"></script>
    </meta>
</head>

<body x-data="craftData">
    <table>
        <tr>
            <th></th>
            <th>Have</th>
            <th>Need</th>
        </tr>
        <tr>
            <th>★★★★★</th>
            <td>
                <input tabindex="1" type="number" value="0" @focus="clearValueIfZero" @change="updateCalculations"
                    :disabled="isDisabled.five" x-model="have.five" :class="{ 'zero': !have.five }" />
            </td>
            <td>
                <input tabindex="11" type="number" value="0" @focus="clearValueIfZero" @change="updateCalculations"
                    :disabled="isDisabled.five" x-model="need.five" :class="{ 'zero': !need.five }" />
            </td>
        </tr>
        <tr>
            <th>★★★★</th>
            <td>
                <input tabindex="2" type="number" value="0" @focus="clearValueIfZero" @change="updateCalculations"
                    :disabled="isDisabled.four" x-model="have.four" :class="{ 'zero': !have.four }" />
            </td>
            <td>
                <input tabindex="12" type="number" value="0" @focus="clearValueIfZero" @change="updateCalculations"
                    :disabled="isDisabled.four" x-model="need.four" :class="{ 'zero': !need.four }" />
            </td>
        </tr>
        <tr>
            <th>★★★</th>
            <td>
                <input tabindex="3" type="number" value="0" @focus="clearValueIfZero" @change="updateCalculations"
                    :disabled="isDisabled.three" x-model="have.three" :class="{ 'zero': !have.three }" />
            </td>
            <td>
                <input tabindex="13" type="number" value="0" @focus="clearValueIfZero" @change="updateCalculations"
                    :disabled="isDisabled.three" x-model="need.three" :class="{ 'zero': !need.three }" />
            </td>
        </tr>
        <tr>
            <th>★★</th>
            <td>
                <input tabindex="4" type="number" value="0" @focus="clearValueIfZero" @change="updateCalculations"
                    :disabled="isDisabled.two" x-model="have.two" :class="{ 'zero': !have.two }" />
            </td>
            <td>
                <input tabindex="14" type="number" value="0" @focus="clearValueIfZero" @change="updateCalculations"
                    :disabled="isDisabled.two" x-model="need.two" :class="{ 'zero': !need.two }" />
            </td>
        </tr>
        <tr>
            <th>★</th>
            <td>
                <input tabindex="5" type="number" value="0" @focus="clearValueIfZero" @change="updateCalculations"
                    :disabled="isDisabled.one" x-model="have.one" :class="{ 'zero': !have.one }" />
            </td>
            <td>
                <input tabindex="15" type="number" value="0" @focus="clearValueIfZero" @change="updateCalculations"
                    :disabled="isDisabled.one" x-model="need.one" :class="{ 'zero': !need.one }" />
            </td>
        </tr>
        <tr>
            <td>
                <div class="reset-button-container">
                    <button class="reset-button" @click="fullReset">Full Reset</button>
                </div>
            </td>
            <td>
                <div class="reset-button-container">
                    <button tabindex="6" class="reset-button" @click="reset('have')">Reset</button>
                </div>
            </td>
            <td>
                <div class="reset-button-container">
                    <button tabindex="16" class="reset-button" @click="reset('need')">Reset</button>
                </div>
            </td>
        </tr>

        <tr>
            <th>Progress</th>
            <td colspan="2">
                <progress value="0" max="100" x-model="percent" :class="{ 'full': percent >= 100 }"></progress>
                <br />
                <span x-text="haveSimplified"></span> / <span x-text="needSimplified"></span>
                <template x-if="diffSimplified > 0">
                    <span>
                        (<span x-text="diffSimplified"></span> remaining)
                    </span>
                </template>
                <br />
                <span x-text="percentText"></span>
            </td>
        </tr>
    </table>

    <section>
        <h2>Presets</h2>

        <p>
            If a preset is selected, the simplified value will be calculated based only on the available
            rarities of your selected preset (with the lowest rarity taking a value of 1, then 3, then 9, etc.).
        </p>

        <h3>Character ascension</h3>

        <div class="range-group" :class="{ 'error': presetOptions.characterAscension.error }">
            <input type="range" :min="presets.characterAscension.min" :max="presets.characterAscension.max"
                @change="updatePreset('characterAscension')" x-model="presetOptions.characterAscension.from">
            <div>
                <span x-text="presetOptions.characterAscension.from"></span> ✦
                to
                <span x-text="presetOptions.characterAscension.to"></span> ✦
                <template x-if="presetOptions.characterAscension.error">
                    <span style="color: red;">
                        <br />
                        Invalid selection
                    </span>
                </template>
            </div>
            <input type="range" :min="presets.characterAscension.min" :max="presets.characterAscension.max"
                @change="updatePreset('characterAscension')" x-model="presetOptions.characterAscension.to">
        </div>

        <div class="button-group">
            <button class="preset-button" @click="loadPresetFromSelection('characterAscension', 'gemstones')">
                <div class="images">
                    <img src="assets/images/gemstone-5.png">
                    <img src="assets/images/gemstone-4.png">
                    <img src="assets/images/gemstone-3.png">
                    <img src="assets/images/gemstone-2.png">
                    <img src="assets/images/none.png">
                </div>
                <div>
                    Gemstones
                    (<span x-text="craftableToStr(presetOptions.characterAscension.drops.gemstones)"></span>)
                </div>
            </button>
            <button class="preset-button" @click="loadPresetFromSelection('characterAscension', 'mobDrops')">
                <div class="images">
                    <img src="assets/images/none.png">
                    <img src="assets/images/none.png">
                    <img src="assets/images/mob-drop-3.png">
                    <img src="assets/images/mob-drop-2.png">
                    <img src="assets/images/mob-drop-1.png">
                </div>
                <div>
                    Mob drops
                    (<span x-text="craftableToStr(presetOptions.characterAscension.drops.mobDrops)"></span>)
                </div>
            </button>
        </div>

        <h3>Talents</h3>
        <div class="button-group">
            <button class="preset-button" @click="loadPreset(null, 38, 21, 3, null)">
                <div class="images">
                    <img src="assets/images/none.png">
                    <img src="assets/images/talent-book-4.png">
                    <img src="assets/images/talent-book-3.png">
                    <img src="assets/images/talent-book-2.png">
                    <img src="assets/images/none.png">
                </div>
                Talent books (1 talent)
            </button>
            <button class="preset-button" @click="loadPreset(null, null, 31, 22, 6)">
                <div class="images">
                    <img src="assets/images/none.png">
                    <img src="assets/images/none.png">
                    <img src="assets/images/mob-drop-3.png">
                    <img src="assets/images/mob-drop-2.png">
                    <img src="assets/images/mob-drop-1.png">
                </div>
                Mob drops (1 talent)
            </button>
            <button class="preset-button" @click="loadPreset(null, 76, 42, 6, null)">
                <div class="images">
                    <img src="assets/images/none.png">
                    <img src="assets/images/talent-book-4.png">
                    <img src="assets/images/talent-book-3.png">
                    <img src="assets/images/talent-book-2.png">
                    <img src="assets/images/none.png">
                </div>
                Talent books (2 talents)
            </button>
            <button class="preset-button" @click="loadPreset(null, null, 62, 44, 12)">
                <div class="images">
                    <img src="assets/images/none.png">
                    <img src="assets/images/none.png">
                    <img src="assets/images/mob-drop-3.png">
                    <img src="assets/images/mob-drop-2.png">
                    <img src="assets/images/mob-drop-1.png">
                </div>
                Mob drops (2 talents)
            </button>
            <button class="preset-button" @click="loadPreset(null, 114, 63, 9, null)">
                <div class="images">
                    <img src="assets/images/none.png">
                    <img src="assets/images/talent-book-4.png">
                    <img src="assets/images/talent-book-3.png">
                    <img src="assets/images/talent-book-2.png">
                    <img src="assets/images/none.png">
                </div>
                Talent books (3 talents)
            </button>
            <button class="preset-button" @click="loadPreset(null, null, 93, 66, 18)">
                <div class="images">
                    <img src="assets/images/none.png">
                    <img src="assets/images/none.png">
                    <img src="assets/images/mob-drop-3.png">
                    <img src="assets/images/mob-drop-2.png">
                    <img src="assets/images/mob-drop-1.png">
                </div>
                Mob drops (3 talents)
            </button>
        </div>

        <h3>5★ weapon ascension</h3>
        <div class="button-group">
            <button class="preset-button" @click="loadPreset(6, 14, 14, 5, null)">
                <div class="images">
                    <img src="assets/images/weapon-domain-drop-5.png">
                    <img src="assets/images/weapon-domain-drop-4.png">
                    <img src="assets/images/weapon-domain-drop-3.png">
                    <img src="assets/images/weapon-domain-drop-2.png">
                    <img src="assets/images/none.png">
                </div>
                Weapon domain drops
            </button>
            <button class="preset-button" @click="loadPreset(null, 41, 27, 23, null)">
                <div class="images">
                    <img src="assets/images/none.png">
                    <img src="assets/images/elite-mob-drop-4.png">
                    <img src="assets/images/elite-mob-drop-3.png">
                    <img src="assets/images/elite-mob-drop-2.png">
                    <img src="assets/images/none.png">
                </div>
                Elite mob drops
            </button>
            <button class="preset-button" @click="loadPreset(null, null, 27, 23, 15)">
                <div class="images">
                    <img src="assets/images/none.png">
                    <img src="assets/images/none.png">
                    <img src="assets/images/mob-drop-3.png">
                    <img src="assets/images/mob-drop-2.png">
                    <img src="assets/images/mob-drop-1.png">
                </div>
                Mob drops
            </button>
        </div>

        <h3>4★ weapon ascension</h3>
        <div class="button-group">
            <button class="preset-button" @click="loadPreset(4, 9, 9, 3, null)">
                <div class="images">
                    <img src="assets/images/weapon-domain-drop-5.png">
                    <img src="assets/images/weapon-domain-drop-4.png">
                    <img src="assets/images/weapon-domain-drop-3.png">
                    <img src="assets/images/weapon-domain-drop-2.png">
                    <img src="assets/images/none.png">
                </div>
                Weapon domain drops
            </button>
            <button class="preset-button" @click="loadPreset(null, 27, 18, 15, null)">
                <div class="images">
                    <img src="assets/images/none.png">
                    <img src="assets/images/elite-mob-drop-4.png">
                    <img src="assets/images/elite-mob-drop-3.png">
                    <img src="assets/images/elite-mob-drop-2.png">
                    <img src="assets/images/none.png">
                </div>
                Elite mob drops
            </button>
            <button class="preset-button" @click="loadPreset(null, null, 18, 15, 10)">
                <div class="images">
                    <img src="assets/images/none.png">
                    <img src="assets/images/none.png">
                    <img src="assets/images/mob-drop-3.png">
                    <img src="assets/images/mob-drop-2.png">
                    <img src="assets/images/mob-drop-1.png">
                </div>
                Mob drops
            </button>
        </div>
    </section>

    <section>
        <h2>Other calculators</h2>

        <div class="button-group row">
            <button class="link-button"
                @click="window.location.href='https://act.hoyolab.com/ys/event/calculator-sea/index.html'">
                <div class="images">
                    <img src="assets/images/hoyolab.png">
                </div>
                Hoyolab
            </button>
            <button class="link-button" @click="window.location.href='https://paimon.moe/calculator'">
                <div class="images">
                    <img src="assets/images/paimon.png">
                </div>
                Paimon.moe
            </button>
        </div>
    </section>
</body>

<footer>
    <div>
        Calculations do not take crafting bonuses into account.
    </div>
    <div class="icons">
        <a href="https://t.me/Remls">
            <svg fill="none" height="25" stroke="#0d1117" stroke-linecap="round" stroke-linejoin="round"
                stroke-width="1.5" viewbox="0 0 24 24" width="25">
                <path d="M0 0h24v24H0z" fill="none" stroke="none">
                </path>
                <path d="M15 10l-4 4l6 6l4 -16l-18 7l4 2l2 6l3 -4">
                </path>
            </svg>
        </a>
        <a href="https://github.com/Remls/CraftingCalculator">
            <svg fill="none" height="25" stroke="#0d1117" stroke-linecap="round" stroke-linejoin="round"
                stroke-width="1.5" viewbox="0 0 24 24" width="25">
                <path d="M0 0h24v24H0z" fill="none" stroke="none">
                </path>
                <path
                    d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5">
                </path>
            </svg>
        </a>
    </div>
</footer>

</html>